{"ast":null,"code":"var _jsxFileName = \"/Users/matthewwallace/cymatics/ronin-react/src/CourseContainer/index.js\";\nimport React, { Component } from 'react';\nimport CourseList from '../CourseList';\nimport CreateCourseForm from '../CreateCourseForm';\nimport EditCourseModal from '../EditCourseModal';\nimport MilestoneContainer from '../MilestoneContainer';\nexport default class courseContainer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getMilestones = async () => {\n      try {\n        const url = process.env.REACT_APP_API_URL + \"/api/v1/milestones/\";\n        const milestonesResponse = await fetch(url, {\n          credentials: 'include',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        const milestonesJson = await milestonesResponse.json();\n        console.log('this is milestones json', milestonesJson);\n        console.log(milestonesResponse);\n        this.setState({\n          milestones: milestonesJson.data\n        });\n      } catch (error) {\n        console.log('Error getting Milestones data');\n      }\n    };\n\n    this.createMilestone = async milestoneToAdd => {\n      console.log('THIS SHOULD BE PROPS FROM APP');\n      console.log(this.props.userInfo);\n      console.log(this.props.userInfo.loggedInUserId);\n      console.log('HERE IS THE milestone BEING ADDED');\n      console.log(milestoneToAdd);\n\n      try {\n        const url = process.env.REACT_APP_API_URL + \"/api/v1/milestones/\" + this.state.courses.id;\n        const createdMilestoneResponse = await fetch(url, {\n          method: 'POST',\n          credentials: 'include',\n          body: JSON.stringify(milestoneToAdd),\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        console.log(\"createdMilsetoneResponse\", createdMilestoneResponse);\n        const createMilestoneJson = await createdMilestoneResponse.json();\n        console.log('here is what we got back after trying to add a course');\n        console.log(createMilestoneJson);\n\n        if (createdMilestoneResponse.status === 201) {\n          this.setState({\n            milestones: [...this.state.milestones, createMilestoneJson.data]\n          });\n        }\n      } catch (error) {\n        console.error(\"Error adding milestone\");\n        console.error(error);\n      }\n    };\n\n    this.getCourses = async () => {\n      try {\n        const url = 'http://localhost:8000' + \"/api/v1/courses/\";\n        const coursesResponse = await fetch(url, {\n          credentials: 'include',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        const coursesJson = await coursesResponse.json();\n        console.log('this is courses json', coursesJson);\n        console.log(coursesResponse);\n        this.setState({\n          courses: coursesJson.data\n        });\n      } catch (error) {\n        console.log('Error getting courses data');\n      }\n    };\n\n    this.deleteCourse = async idOfCourseToDelete => {\n      const url = 'http://localhost:8000' + \"/api/v1/courses/\" + idOfCourseToDelete;\n\n      try {\n        const deleteCourseResponse = await fetch(url, {\n          credentials: \"include\",\n          method: \"DELETE\"\n        });\n        console.log(\"deleteCoruseResponse\", deleteCourseResponse);\n        const deleteCourseJson = await deleteCourseResponse.json();\n        console.log(\"deleteCourseJson\", deleteCourseJson);\n\n        if (deleteCourseResponse.status == 200) {\n          this.setState({\n            courses: this.state.courses.filter(course => course.id != idOfCourseToDelete)\n          });\n        }\n      } catch (error) {\n        console.error('Error deleting course');\n        console.error(error);\n      }\n    };\n\n    this.createCourse = async courseToAdd => {\n      console.log('THIS SHOULD BE PROPS FROM APP');\n      console.log(this.props.userInfo);\n      console.log(this.props.userInfo.loggedInUserId);\n      console.log('HERE IS THE COURSE BEING ADDED');\n      console.log(courseToAdd);\n\n      try {\n        const url = 'http://localhost:8000' + \"/api/v1/courses/create\";\n        const createdCourseResponse = await fetch(url, {\n          method: 'POST',\n          credentials: 'include',\n          body: JSON.stringify(courseToAdd),\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        console.log(\"createdCourseResponse\", createdCourseResponse);\n        const createCourseJson = await createdCourseResponse.json();\n        console.log('here is what we got back after trying to add a course');\n        console.log(createCourseJson);\n\n        if (createdCourseResponse.status === 201) {\n          this.setState({\n            courses: [...this.state.courses, createCourseJson.data]\n          });\n        }\n      } catch (error) {\n        console.error(\"Error adding course\");\n        console.error(error);\n      }\n    };\n\n    this.editCourse = idOfCourseToEdit => {\n      console.log('you are tyring to edit this course', idOfCourseToEdit);\n      this.setState({\n        idOfCourseToEdit: idOfCourseToEdit\n      });\n    };\n\n    this.updateCourse = async updatedCourseInfo => {\n      const url = 'http://localhost:8000' + '/api/v1/courses/' + this.state.idOfCourseToEdit;\n      console.log('THIS IS THE UPDATED COURSE INFO', updatedCourseInfo);\n\n      try {\n        const updatedCourseResponse = await fetch(url, {\n          credentials: 'include',\n          method: 'PUT',\n          body: JSON.stringify(updatedCourseInfo),\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        console.log(\"updatedCourseResponse\", updatedCourseResponse);\n        const updatedCourseJson = await updatedCourseResponse.json();\n        console.log(\"updatedCourseJson\", updatedCourseJson);\n        this.setState({\n          idOfCourseToEdit: -1\n        });\n        this.getCourses();\n      } catch (error) {\n        console.error(\"Error updating course info\");\n        console.error(error);\n      }\n    };\n\n    this.closeModal = () => {\n      this.setState({\n        idOfCourseToEdit: -1\n      });\n    };\n\n    this.state = {\n      courses: [],\n      idOfCourseToEdit: -1,\n      milestones: []\n    };\n  }\n\n  componentDidMount() {\n    this.getCourses();\n    this.getMilestones();\n  }\n\n  render() {\n    console.log(\"here is the this.state in render() in course container\");\n    console.log(this.state);\n    console.log(this.props.userInfo);\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 4\n      }\n    }, this.props.userInfo.loggedInUserIsAdmin === true && /*#__PURE__*/React.createElement(CreateCourseForm, {\n      userInfo: this.props.userInfo,\n      createCourse: this.createCourse,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 6\n      }\n    }), /*#__PURE__*/React.createElement(CourseList, {\n      courses: this.state.courses,\n      createMilestone: this.createMilestone,\n      userInfo: this.props.userInfo,\n      deleteCourse: this.deleteCourse,\n      editCourse: this.editCourse,\n      createEnrollment: this.props.createEnrollment,\n      createMilestone: this.createMilestone,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 6\n      }\n    }), this.state.idOfCourseToEdit !== -1 && /*#__PURE__*/React.createElement(EditCourseModal, {\n      key: this.state.idOfCourseToEdit,\n      courseToEdit: this.state.courses.find(course => course.id === this.state.idOfCourseToEdit),\n      updateCourse: this.updateCourse,\n      closeModal: this.closeModal,\n      createMilestone: this.createMilestone,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 6\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["/Users/matthewwallace/cymatics/ronin-react/src/CourseContainer/index.js"],"names":["React","Component","CourseList","CreateCourseForm","EditCourseModal","MilestoneContainer","courseContainer","constructor","props","getMilestones","url","process","env","REACT_APP_API_URL","milestonesResponse","fetch","credentials","headers","milestonesJson","json","console","log","setState","milestones","data","error","createMilestone","milestoneToAdd","userInfo","loggedInUserId","state","courses","id","createdMilestoneResponse","method","body","JSON","stringify","createMilestoneJson","status","getCourses","coursesResponse","coursesJson","deleteCourse","idOfCourseToDelete","deleteCourseResponse","deleteCourseJson","filter","course","createCourse","courseToAdd","createdCourseResponse","createCourseJson","editCourse","idOfCourseToEdit","updateCourse","updatedCourseInfo","updatedCourseResponse","updatedCourseJson","closeModal","componentDidMount","render","loggedInUserIsAdmin","createEnrollment","find"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport CourseList from '../CourseList'\nimport CreateCourseForm from '../CreateCourseForm'\nimport EditCourseModal from '../EditCourseModal'\nimport MilestoneContainer from '../MilestoneContainer'\n\nexport default class courseContainer extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tcourses: [],\n\t\t\tidOfCourseToEdit: -1,\n\t\t\tmilestones:[]\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.getCourses()\n\t\tthis.getMilestones()\n\t}\n\n\tgetMilestones = async () => {\n\t\ttry {\n\t\t\tconst url = process.env.REACT_APP_API_URL + \"/api/v1/milestones/\" \n\t\t\tconst milestonesResponse = await fetch(url, {\n\t\t\t\t   \tcredentials: 'include',\n\t\t\t\t   \theaders: { \n\t\t\t\t   \t\t'Content-Type': 'application/json' \n\t\t\t\t   \t}\n\t\t\t\t})\t   \n\t\t\tconst milestonesJson = await milestonesResponse.json()\n\t\t\tconsole.log('this is milestones json' ,milestonesJson);\n\t\t\tconsole.log(milestonesResponse);\n\t\t\tthis.setState({\n\t\t\t\tmilestones: milestonesJson.data\n\t\t\t})\n\t\t} catch (error) {\n\t\t\tconsole.log('Error getting Milestones data');\n\t\t}\n\t}\n\n\tcreateMilestone = async (milestoneToAdd) => {\n\t\tconsole.log('THIS SHOULD BE PROPS FROM APP');\n \t\tconsole.log(this.props.userInfo)\n \t\tconsole.log(this.props.userInfo.loggedInUserId);\n \t\tconsole.log('HERE IS THE milestone BEING ADDED');\n \t\tconsole.log(milestoneToAdd);\n\t\ttry {\n\t\t\tconst url = process.env.REACT_APP_API_URL + \"/api/v1/milestones/\" + this.state.courses.id\n\t\t\tconst createdMilestoneResponse = await fetch(url, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tcredentials: 'include',\n\t\t\t\tbody: JSON.stringify(milestoneToAdd),\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type':'application/json'\n\t\t\t\t}\n\t\t\t})\n\t\t\tconsole.log(\"createdMilsetoneResponse\", createdMilestoneResponse);\n\t\t\tconst createMilestoneJson = await createdMilestoneResponse.json()\n\t\t\tconsole.log('here is what we got back after trying to add a course');\n\t\t\tconsole.log(createMilestoneJson);\n\t\t\tif (createdMilestoneResponse.status === 201 ){\n\t\t\t\tthis.setState({\n\t\t\t\t\tmilestones:[...this.state.milestones, createMilestoneJson.data]\n\t\t\t\t})\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error adding milestone\");\n\t\t\tconsole.error(error)\n\t\t}\n\n\t}\n\n\n\tgetCourses = async () => {\n\t\ttry {\n\t\t\tconst url = 'http://localhost:8000'  + \"/api/v1/courses/\" \n\t\t\tconst coursesResponse = await fetch(url, {\n\t\t\t\t   \tcredentials: 'include',\n\t\t\t\t   \theaders: { \n\t\t\t\t   \t\t'Content-Type': 'application/json' \n\t\t\t\t   \t}\n\t\t\t\t})\t   \n\t\t\tconst coursesJson = await coursesResponse.json()\n\t\t\tconsole.log('this is courses json' ,coursesJson);\n\t\t\tconsole.log(coursesResponse);\n\t\t\tthis.setState({\n\t\t\t\tcourses: coursesJson.data\n\t\t\t})\n\t\t} catch (error) {\n\t\t\tconsole.log('Error getting courses data');\n\t\t}\n\t}\n\n\tdeleteCourse = async (idOfCourseToDelete) => {\n\t\tconst url = 'http://localhost:8000' + \"/api/v1/courses/\" + idOfCourseToDelete\n\t\ttry {\n\t\t\tconst deleteCourseResponse = await fetch(url, {\n\t\t\t\tcredentials: \"include\",\n\t\t\t\tmethod: \"DELETE\"\n\t\t\t})\n\t\t\tconsole.log(\"deleteCoruseResponse\", deleteCourseResponse);\n\t\t\tconst deleteCourseJson = await deleteCourseResponse.json()\n\t\t\tconsole.log(\"deleteCourseJson\", deleteCourseJson);\n\t\t\tif (deleteCourseResponse.status == 200) {\n\t\t\t\tthis.setState({\n\t\t\t\tcourses: this.state.courses.filter(course => course.id != idOfCourseToDelete)\n\t\t\t\t})\n\t\t\t}\t\n\t\t} catch (error) {\n\t\t\tconsole.error('Error deleting course');\n\t\t\tconsole.error(error)\n\t\t}\n\t}\n\n\tcreateCourse = async (courseToAdd) => {\n\t\tconsole.log('THIS SHOULD BE PROPS FROM APP');\n \t\tconsole.log(this.props.userInfo)\n \t\tconsole.log(this.props.userInfo.loggedInUserId);\n \t\tconsole.log('HERE IS THE COURSE BEING ADDED');\n \t\tconsole.log(courseToAdd);\n\t\ttry {\n\t\t\tconst url = 'http://localhost:8000' + \"/api/v1/courses/create\" \n\t\t\tconst createdCourseResponse = await fetch(url, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tcredentials: 'include',\n\t\t\t\tbody: JSON.stringify(courseToAdd),\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type':'application/json'\n\t\t\t\t}\n\t\t\t})\n\t\t\tconsole.log(\"createdCourseResponse\", createdCourseResponse);\n\n\t\t\tconst createCourseJson = await createdCourseResponse.json()\n\t\t\tconsole.log('here is what we got back after trying to add a course');\n\t\t\tconsole.log(createCourseJson);\n\t\t\tif (createdCourseResponse.status === 201 ){\n\t\t\t\tthis.setState({\n\t\t\t\t\tcourses:[...this.state.courses, createCourseJson.data]\n\t\t\t\t})\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error adding course\");\n\t\t\tconsole.error(error)\n\t\t}\n\n\t}\n\n\teditCourse = (idOfCourseToEdit) => {\n\t\tconsole.log('you are tyring to edit this course', idOfCourseToEdit);\n\t\tthis.setState({\n\t\t\tidOfCourseToEdit: idOfCourseToEdit\n\t\t})\n\t}\n\n\tupdateCourse = async (updatedCourseInfo) => {\n\t\tconst url = 'http://localhost:8000' + '/api/v1/courses/' + this.state.idOfCourseToEdit\n\t\tconsole.log('THIS IS THE UPDATED COURSE INFO', updatedCourseInfo);\n\t\ttry {\n\t\t\tconst updatedCourseResponse = await fetch(url, {\n\t\t\t\tcredentials:'include',\n\t\t\t\tmethod: 'PUT',\n\t\t\t\tbody:JSON.stringify(updatedCourseInfo),\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t}\n\t\t\t})\n\t\t\tconsole.log(\"updatedCourseResponse\", updatedCourseResponse);\n\t\t\tconst updatedCourseJson = await updatedCourseResponse.json()\n\t\t\tconsole.log(\"updatedCourseJson\", updatedCourseJson);\n\t\t\tthis.setState({idOfCourseToEdit: - 1})\n\t\t\tthis.getCourses()\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error updating course info\");\n\t\t\tconsole.error(error)\n\t\t}\n\t}\n\n\n\t\tcloseModal = () => {\n\t\t\tthis.setState({\n\t\t\t\tidOfCourseToEdit: -1\n\t\t})\n\t}\n\t\n\trender() {\n\t\tconsole.log(\"here is the this.state in render() in course container\");\n\t\tconsole.log(this.state);\n\t\tconsole.log(this.props.userInfo);\n\t\treturn(\n\t\t\t<React.Fragment>\n\t\t\t\t\n\t\t\t\t{ this.props.userInfo.loggedInUserIsAdmin === true\n\t\t\t\t\t&&\n\t\t\t\t\t<CreateCourseForm \n\t\t\t\t\t\tuserInfo={this.props.userInfo}\n\t\t\t\t\t\tcreateCourse={this.createCourse}/>\n\t\t\t\t}\n\n\t\t\t\t\t<CourseList \n\t\t\t\t\t\tcourses={this.state.courses} \n\t\t\t\t\t\tcreateMilestone={this.createMilestone}\n\t\t\t\t\t\tuserInfo={this.props.userInfo}\n\t\t\t\t\t\tdeleteCourse={this.deleteCourse}\n\t\t\t\t\t\teditCourse={this.editCourse}\n\t\t\t\t\t\tcreateEnrollment={this.props.createEnrollment}\n\t\t\t\t\t\tcreateMilestone={this.createMilestone}\n\n\t\t\t\t\t/>\n\n\t\t\t\t\t\n\t\t\t\t\t\n\n\t\t\t\n\t\t\t\t{ this.state.idOfCourseToEdit !== -1 \n\t\t\t\t\t&& \n\t\t\t\t\t<EditCourseModal \n\t\t\t\t\t\tkey={this.state.idOfCourseToEdit}\n\t\t\t\t\t\tcourseToEdit={this.state.courses.find((course) => course.id === this.state.idOfCourseToEdit)}\n\t\t\t\t\t\tupdateCourse={this.updateCourse}\n\t\t\t\t\t\tcloseModal={this.closeModal}\n\t\t\t\t\t\tcreateMilestone={this.createMilestone}\n\t\t\t\t\t\t/>}\n\t\t\t</React.Fragment>\n\t\t)\n\t}\n}"]},"metadata":{},"sourceType":"module"}