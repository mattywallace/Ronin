{"ast":null,"code":"var _jsxFileName = \"/Users/matthewwallace/cymatics/ronin-react/src/EnrollmentContainer/index.js\";\nimport React, { Component } from 'react';\nimport EnrollmentList from '../EnrollmentList';\nimport CourseContainer from '../CourseContainer';\nexport default class EnrollmentContainer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getEnrollments = async () => {\n      try {\n        const url = process.env.REACT_APP_API_URL + \"/api/v1/enrollments/\" + this.props.loggedInUserId;\n        const enrollmentsResponse = await fetch(url, {\n          credentials: 'include',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        const enrollmentsJson = await enrollmentsResponse.json();\n        console.log('this is enrollmentsJson', enrollmentsJson);\n        console.log('this is enrollmentsResponse', enrollmentsResponse);\n        this.setState({\n          enrollments: enrollmentsJson.data\n        });\n      } catch (error) {\n        console.log('Error getting enrollments data');\n        console.error(error);\n      }\n    };\n\n    this.createEnrollment = async (enrollmentToAdd, courseId) => {\n      console.log('Props from APP');\n      console.log('HERE IS THE COURSE ID IN ENROLLMENTS');\n      console.log(enrollmentToAdd);\n\n      try {\n        const url = process.env.REACT_APP_API_URL + \"/api/v1/enrollments/\" + courseId + '/' + this.props.loggedInUserId;\n        const createdEnrollmentResponse = await fetch(url, {\n          method: 'POST',\n          credentials: 'include',\n          body: JSON.stringify(enrollmentToAdd),\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        console.log('createdEnrollmentResponse', createdEnrollmentResponse);\n        const createdEnrollmentJson = await createdEnrollmentResponse.json();\n        console.log(\"here is what we get when we try to enroll in a course\");\n        console.log(createdEnrollmentJson);\n\n        if (createdEnrollmentResponse.status === 201) {\n          this.setState({\n            enrollments: [...this.state.enrollments, createdEnrollmentJson.data]\n          });\n        }\n\n        console.log('HERE IS THE STATE OF ENROLLMENTS IN APP.JS');\n        console.log(this.state.enrollments);\n      } catch (error) {\n        console.error('error enrolling in course');\n        console.error(error);\n      }\n    };\n\n    this.deleteEnrollment = async idOfEnrollmentToDelete => {\n      console.log('delete enrollment');\n      const url = process.env.REACT_APP_API_URL + \"/api/v1/enrollments/\" + idOfEnrollmentToDelete;\n\n      try {\n        const deleteEnrollmentResponse = await fetch(url, {\n          credentials: \"include\",\n          method: \"DELETE\"\n        });\n        console.log(\"deleteEnrollmentResponse\", deleteEnrollmentResponse);\n        const deleteEnrollmentJson = await deleteEnrollmentResponse.json();\n        console.log(\"deleteEnrollmentJson\", deleteEnrollmentJson);\n\n        if (deleteEnrollmentResponse.status === 200) {\n          this.setState({\n            courses: this.state.enrollments.filter(enrollment => enrollment.id !== idOfEnrollmentToDelete)\n          });\n        }\n      } catch (error) {\n        console.error('Error deleting enrollment');\n        console.error(error);\n      }\n    };\n\n    this.state = {\n      enrollments: []\n    };\n  }\n\n  componentDidMount() {\n    this.getEnrollments();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(EnrollmentList, {\n      deleteEnrollment: this.deleteEnrollment,\n      enrollments: this.state.enrollments,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(CourseContainer, {\n      userInfo: this.state,\n      createEnrollment: this.createEnrollment,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 5\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["/Users/matthewwallace/cymatics/ronin-react/src/EnrollmentContainer/index.js"],"names":["React","Component","EnrollmentList","CourseContainer","EnrollmentContainer","constructor","props","getEnrollments","url","process","env","REACT_APP_API_URL","loggedInUserId","enrollmentsResponse","fetch","credentials","headers","enrollmentsJson","json","console","log","setState","enrollments","data","error","createEnrollment","enrollmentToAdd","courseId","createdEnrollmentResponse","method","body","JSON","stringify","createdEnrollmentJson","status","state","deleteEnrollment","idOfEnrollmentToDelete","deleteEnrollmentResponse","deleteEnrollmentJson","courses","filter","enrollment","id","componentDidMount","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport EnrollmentList from '../EnrollmentList'\nimport CourseContainer from '../CourseContainer'\n\n\n\nexport default class EnrollmentContainer extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tenrollments: []\t\t\t\n\t\t}\n\t}\n\t\n\tcomponentDidMount() {\n    \tthis.getEnrollments()\n  \t}\n\n  \tgetEnrollments = async () => {\n\t    try {\n\t      const url = process.env.REACT_APP_API_URL + \"/api/v1/enrollments/\" + this.props.loggedInUserId\n\t      const enrollmentsResponse = await fetch(url, {\n\t        credentials:'include',\n\t        headers: {\n\t          'Content-Type': 'application/json'\n\t        }\n\t      })\n\t      const enrollmentsJson = await enrollmentsResponse.json()\n\t      console.log('this is enrollmentsJson', enrollmentsJson);\n\t      console.log('this is enrollmentsResponse', enrollmentsResponse);\n\t      this.setState({\n\t        enrollments: enrollmentsJson.data\n\t      })\n\t    } catch (error) {\n\t      console.log('Error getting enrollments data');\n\t      console.error(error)\n\t    }\n\t}\n\n\t createEnrollment = async (enrollmentToAdd, courseId) => {\n\t    console.log('Props from APP');\n\t    console.log('HERE IS THE COURSE ID IN ENROLLMENTS');\n\t    console.log(enrollmentToAdd);\n\t    try {\n\t      const url = process.env.REACT_APP_API_URL  + \"/api/v1/enrollments/\" + courseId + '/' + this.props.loggedInUserId\n\t      const createdEnrollmentResponse = await fetch(url, {\n\t        method: 'POST',\n\t        credentials:'include',\n\t        body: JSON.stringify(enrollmentToAdd),\n\t        headers: {\n\t          'Content-Type':'application/json'\n\t        }\n\t      })\n\t      console.log('createdEnrollmentResponse', createdEnrollmentResponse);\n\t      const createdEnrollmentJson = await createdEnrollmentResponse.json()\n\t      console.log(\"here is what we get when we try to enroll in a course\");\n\t      console.log(createdEnrollmentJson);\n\t      if (createdEnrollmentResponse.status === 201 ) {\n\t        this.setState({\n\t          enrollments:[...this.state.enrollments, createdEnrollmentJson.data]\n\t        })\n\t      }\n\t      console.log('HERE IS THE STATE OF ENROLLMENTS IN APP.JS');\n\t      console.log(this.state.enrollments)\n\t    } catch (error) {\n\t      console.error('error enrolling in course');\n\t      console.error(error)\n\t    }\n\t    \n\t}\n\t\n\n\tdeleteEnrollment = async (idOfEnrollmentToDelete) => {\n\t\tconsole.log('delete enrollment');\n\t\tconst url = process.env.REACT_APP_API_URL + \"/api/v1/enrollments/\" + idOfEnrollmentToDelete\n\t\ttry {\n\t\t\tconst deleteEnrollmentResponse = await fetch(url, {\n\t\t\t\tcredentials: \"include\",\n\t\t\t\tmethod: \"DELETE\"\n\t\t\t})\n\t\t\tconsole.log(\"deleteEnrollmentResponse\", deleteEnrollmentResponse);\n\t\t\tconst deleteEnrollmentJson = await deleteEnrollmentResponse.json()\n\t\t\tconsole.log(\"deleteEnrollmentJson\", deleteEnrollmentJson);\n\t\t\tif (deleteEnrollmentResponse.status === 200) {\n\t\t\t\tthis.setState({\n\t\t\t\tcourses: this.state.enrollments.filter(enrollment => enrollment.id !== idOfEnrollmentToDelete)\n\t\t\t\t})\n\t\t\t}\t\n\t\t} catch (error) {\n\t\t\tconsole.error('Error deleting enrollment');\n\t\t\tconsole.error(error)\n\t\t}\n\t}\n\t\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<EnrollmentList \n\t\t\t\t\tdeleteEnrollment={this.deleteEnrollment}\n\t\t\t\t\tenrollments={this.state.enrollments} \n\t\t\t\t/>\n\t\t\t\t<CourseContainer \n          \t\t\tuserInfo={this.state}\n          \t\t\tcreateEnrollment={this.createEnrollment}\n         \t\t />\n\n\t\t\t</React.Fragment>\n\n\t\t)\n\t}\n}\n\n"]},"metadata":{},"sourceType":"module"}